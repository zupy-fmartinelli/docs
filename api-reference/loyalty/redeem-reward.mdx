---
title: "Redeem Reward"
api: "POST /loyalty/rewards/{reward_id}/redeem"
description: "Process reward redemption for customer using their loyalty points balance"
---

## Overview

This endpoint processes the redemption of a specific reward for a customer using their accumulated loyalty points. The system validates point balance, reward availability, and creates a redemption record for fulfillment tracking.

## Authentication

<ParamField header="Authorization" type="string" required>
  Bearer token for API authentication
  ```
  Authorization: Bearer {your_api_key}
  ```
</ParamField>

## Path Parameters

<ParamField path="reward_id" type="string" required>
  Unique identifier of the reward to redeem
  ```
  rwrd_abc123xyz789
  ```
</ParamField>

## Request Body

<ParamField body="customer" type="object" required>
  Customer identification for the redemption
  
  <Expandable title="Customer Object">
    <ParamField body="member_code" type="string">
      Zupy customer member code (highest priority)
      ```
      ZP-12345678
      ```
    </ParamField>
    
    <ParamField body="whatsapp" type="string">
      Customer's WhatsApp number
      ```
      +5511965958122
      ```
    </ParamField>
    
    <ParamField body="email" type="string">
      Customer's email address
      ```
      joao@email.com
      ```
    </ParamField>
    
    <ParamField body="cpf" type="string">
      Customer's CPF number
      ```
      12345678901
      ```
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="quantity" type="number">
  Quantity of rewards to redeem (default: 1)
  ```
  2
  ```
</ParamField>

<ParamField body="delivery_info" type="object">
  Delivery information for physical rewards
  
  <Expandable title="Delivery Info Object">
    <ParamField body="type" type="string">
      Delivery method
      ```
      pickup | delivery | digital
      ```
    </ParamField>
    
    <ParamField body="address" type="object">
      Delivery address (required for delivery type)
      
      <Expandable title="Address Object">
        <ParamField body="street" type="string">
          Street address
        </ParamField>
        
        <ParamField body="number" type="string">
          Address number
        </ParamField>
        
        <ParamField body="complement" type="string">
          Address complement
        </ParamField>
        
        <ParamField body="neighborhood" type="string">
          Neighborhood
        </ParamField>
        
        <ParamField body="city" type="string">
          City name
        </ParamField>
        
        <ParamField body="state" type="string">
          State abbreviation
        </ParamField>
        
        <ParamField body="postal_code" type="string">
          Postal code (CEP)
        </ParamField>
      </Expandable>
    </ParamField>
    
    <ParamField body="pickup_location" type="string">
      Store location for pickup
      ```
      Loja Centro - Shopping ABC
      ```
    </ParamField>
    
    <ParamField body="preferred_date" type="string">
      Preferred delivery/pickup date
      ```
      2024-02-15
      ```
    </ParamField>
    
    <ParamField body="notes" type="string">
      Additional delivery instructions
      ```
      Entregar na portaria
      ```
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="custom_message" type="string">
  Custom message for the redemption (gift cards, experiences)
  ```
  Parabéns pelo seu aniversário!
  ```
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the redemption was processed successfully
</ResponseField>

<ResponseField name="data" type="object">
  Redemption transaction details
  
  <Expandable title="Redemption Object">
    <ResponseField name="redemption_id" type="string">
      Unique redemption transaction identifier
    </ResponseField>
    
    <ResponseField name="status" type="string">
      Current redemption status
      ```
      pending | processing | confirmed | shipped | delivered | completed | cancelled
      ```
    </ResponseField>
    
    <ResponseField name="customer" type="object">
      Customer information
      
      <Expandable title="Customer Object">
        <ResponseField name="member_code" type="string">
          Customer's Zupy member code
        </ResponseField>
        
        <ResponseField name="name" type="string">
          Customer's full name
        </ResponseField>
        
        <ResponseField name="points_balance_before" type="number">
          Points balance before redemption
        </ResponseField>
        
        <ResponseField name="points_balance_after" type="number">
          Points balance after redemption
        </ResponseField>
      </Expandable>
    </ResponseField>
    
    <ResponseField name="reward" type="object">
      Redeemed reward details
      
      <Expandable title="Reward Object">
        <ResponseField name="id" type="string">
          Reward identifier
        </ResponseField>
        
        <ResponseField name="name" type="string">
          Reward name
        </ResponseField>
        
        <ResponseField name="category" type="string">
          Reward category
        </ResponseField>
        
        <ResponseField name="points_cost" type="number">
          Points required per unit
        </ResponseField>
        
        <ResponseField name="quantity_redeemed" type="number">
          Quantity redeemed in this transaction
        </ResponseField>
        
        <ResponseField name="total_points_cost" type="number">
          Total points deducted for this redemption
        </ResponseField>
      </Expandable>
    </ResponseField>
    
    <ResponseField name="delivery_info" type="object">
      Delivery information provided
    </ResponseField>
    
    <ResponseField name="estimated_delivery" type="string">
      Estimated delivery/pickup date
    </ResponseField>
    
    <ResponseField name="tracking_code" type="string">
      Tracking code for delivery (if applicable)
    </ResponseField>
    
    <ResponseField name="fulfillment_partner" type="string">
      Partner responsible for fulfillment
    </ResponseField>
    
    <ResponseField name="created_at" type="string">
      Redemption timestamp (ISO 8601)
    </ResponseField>
    
    <ResponseField name="expires_at" type="string">
      Redemption expiration date (for vouchers/coupons)
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="message" type="string">
  Human-readable response message
</ResponseField>

<ResponseField name="timestamp" type="string">
  Response timestamp in ISO 8601 format
</ResponseField>

## Example Request

<CodeGroup>
```bash cURL
curl -X POST "https://api.zupy.com/v1/loyalty/rewards/rwrd_abc123xyz789/redeem" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "customer": {
      "member_code": "ZP-12345678"
    },
    "quantity": 1,
    "delivery_info": {
      "type": "delivery",
      "address": {
        "street": "Rua das Flores",
        "number": "123",
        "neighborhood": "Centro",
        "city": "São Paulo",
        "state": "SP",
        "postal_code": "01310-100"
      },
      "preferred_date": "2024-02-15",
      "notes": "Entregar na portaria"
    }
  }'
```

```javascript JavaScript
const response = await fetch('https://api.zupy.com/v1/loyalty/rewards/rwrd_abc123xyz789/redeem', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    customer: {
      member_code: 'ZP-12345678'
    },
    quantity: 1,
    delivery_info: {
      type: 'delivery',
      address: {
        street: 'Rua das Flores',
        number: '123',
        neighborhood: 'Centro',
        city: 'São Paulo',
        state: 'SP',
        postal_code: '01310-100'
      },
      preferred_date: '2024-02-15',
      notes: 'Entregar na portaria'
    }
  })
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

url = "https://api.zupy.com/v1/loyalty/rewards/rwrd_abc123xyz789/redeem"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "customer": {
        "member_code": "ZP-12345678"
    },
    "quantity": 1,
    "delivery_info": {
        "type": "delivery",
        "address": {
            "street": "Rua das Flores",
            "number": "123",
            "neighborhood": "Centro",
            "city": "São Paulo",
            "state": "SP",
            "postal_code": "01310-100"
        },
        "preferred_date": "2024-02-15",
        "notes": "Entregar na portaria"
    }
}

response = requests.post(url, json=payload, headers=headers)
data = response.json()
print(data)
```

```php PHP
<?php
$url = "https://api.zupy.com/v1/loyalty/rewards/rwrd_abc123xyz789/redeem";

$headers = [
    "Authorization: Bearer YOUR_API_KEY",
    "Content-Type: application/json"
];

$payload = [
    "customer" => [
        "member_code" => "ZP-12345678"
    ],
    "quantity" => 1,
    "delivery_info" => [
        "type" => "delivery",
        "address" => [
            "street" => "Rua das Flores",
            "number" => "123",
            "neighborhood" => "Centro",
            "city" => "São Paulo",
            "state" => "SP",
            "postal_code" => "01310-100"
        ],
        "preferred_date" => "2024-02-15",
        "notes" => "Entregar na portaria"
    ]
];

$response = file_get_contents($url, false, stream_context_create([
    'http' => [
        'method' => 'POST',
        'header' => implode("\r\n", $headers),
        'content' => json_encode($payload)
    ]
]));

$data = json_decode($response, true);
print_r($data);
?>
```
</CodeGroup>

## Example Response

<CodeGroup>
```json 200 - Redemption Successful
{
  "success": true,
  "data": {
    "redemption_id": "red_xyz789abc123",
    "status": "confirmed",
    "customer": {
      "member_code": "ZP-12345678",
      "name": "João Silva",
      "points_balance_before": 2500,
      "points_balance_after": 1500
    },
    "reward": {
      "id": "rwrd_abc123xyz789",
      "name": "Camiseta Exclusiva Zupy",
      "category": "fashion",
      "points_cost": 1000,
      "quantity_redeemed": 1,
      "total_points_cost": 1000
    },
    "delivery_info": {
      "type": "delivery",
      "address": {
        "street": "Rua das Flores",
        "number": "123",
        "neighborhood": "Centro",
        "city": "São Paulo",
        "state": "SP",
        "postal_code": "01310-100"
      },
      "preferred_date": "2024-02-15",
      "notes": "Entregar na portaria"
    },
    "estimated_delivery": "2024-02-18",
    "tracking_code": "ZP24021512345",
    "fulfillment_partner": "Correios",
    "created_at": "2024-02-10T14:30:00Z",
    "expires_at": null
  },
  "message": "Reward redeemed successfully",
  "timestamp": "2024-02-10T14:30:00Z"
}
```

```json 400 - Insufficient Points
{
  "success": false,
  "error": {
    "code": "INSUFFICIENT_POINTS",
    "message": "Customer does not have enough points for this redemption",
    "details": {
      "required_points": 1000,
      "current_balance": 750,
      "deficit": 250
    }
  },
  "timestamp": "2024-02-10T14:30:00Z"
}
```

```json 404 - Reward Not Available
{
  "success": false,
  "error": {
    "code": "REWARD_NOT_AVAILABLE",
    "message": "Reward is currently out of stock or inactive",
    "details": {
      "reward_id": "rwrd_abc123xyz789",
      "status": "out_of_stock",
      "estimated_restock": "2024-02-20"
    }
  },
  "timestamp": "2024-02-10T14:30:00Z"
}
```

```json 422 - Validation Error
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid redemption data provided",
    "details": {
      "customer": ["At least one customer identifier is required"],
      "delivery_info.address": ["Address is required for delivery type"],
      "quantity": ["Quantity must be between 1 and 10"]
    }
  },
  "timestamp": "2024-02-10T14:30:00Z"
}
```
</CodeGroup>

## Redemption Flow

### 1. Validation Process

The system validates the following in order:

1. **Customer Identification**: Member code, WhatsApp, email, or CPF
2. **Reward Availability**: Active status and stock levels
3. **Points Balance**: Sufficient points for total cost
4. **Quantity Limits**: Maximum redemption per transaction
5. **Delivery Information**: Required data based on reward type

### 2. Point Deduction

- Points are deducted immediately upon successful validation
- Transaction is recorded in customer's points history
- Balance is updated in real-time

### 3. Fulfillment Process

<Note>
  **Physical Rewards**: Automatically sent to fulfillment partner with tracking
  
  **Digital Rewards**: Voucher codes or access credentials generated instantly
  
  **Experience Rewards**: Confirmation email with booking instructions
</Note>

## Business Rules

### Point Calculation
- Points are deducted at the exact cost specified in the reward
- No partial point usage - full amount must be available
- Points expiration rules still apply after redemption

### Delivery Options
- **Pickup**: Customer collects at specified store location
- **Delivery**: Shipped to provided address with tracking
- **Digital**: Instant delivery via email or app notification

### Redemption Limits
- Maximum 10 units per transaction for most rewards
- Some exclusive items limited to 1 per customer per month
- VIP customers may have higher limits

## Error Codes

| Code | Description |
|------|-------------|
| `INSUFFICIENT_POINTS` | Customer doesn't have enough points |
| `REWARD_NOT_AVAILABLE` | Reward is inactive or out of stock |
| `CUSTOMER_NOT_FOUND` | No customer found with provided identifiers |
| `VALIDATION_ERROR` | Invalid data in request body |
| `QUANTITY_LIMIT_EXCEEDED` | Requested quantity exceeds limits |
| `DELIVERY_AREA_NOT_SUPPORTED` | Delivery not available to specified address |
| `UNAUTHORIZED` | Missing or invalid API key |

## Rate Limits

- **Production**: 200 requests per minute
- **Staging**: 50 requests per minute

<Warning>
  **Important**: Redemptions are processed immediately and cannot be automatically reversed. Ensure all validation is performed before calling this endpoint.
</Warning>