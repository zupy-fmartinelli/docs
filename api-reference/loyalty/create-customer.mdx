---
title: "Create Customer"
api: "POST /loyalty/customers"
description: "Create a new customer in the loyalty program with comprehensive profile information"
---

## Overview

This endpoint creates a new customer profile in the loyalty program. All customers are automatically enrolled with zero points balance and assigned a unique Zupy member code.

## Authentication

<ParamField header="Authorization" type="string" required>
  Bearer token for API authentication
  ```
  Authorization: Bearer {your_api_key}
  ```
</ParamField>

## Request Body

<ParamField body="whatsapp" type="string" required>
  Customer's WhatsApp number (primary identifier)
  ```
  +5511965958122 or 11965958122
  ```
</ParamField>

<ParamField body="name" type="string" required>
  Customer's full name
  ```
  João Silva
  ```
</ParamField>

<ParamField body="email" type="string">
  Customer's email address (recommended for notifications)
  ```
  joao@email.com
  ```
</ParamField>

<ParamField body="cpf" type="string">
  Customer's CPF number (with or without formatting)
  ```
  12345678901 or 123.456.789-01
  ```
</ParamField>

<ParamField body="birth_date" type="string">
  Customer's birth date in YYYY-MM-DD format
  ```
  1990-05-15
  ```
</ParamField>

<ParamField body="phone" type="string">
  Additional phone number (landline)
  ```
  +551133334444
  ```
</ParamField>

<ParamField body="gender" type="string">
  Customer's gender
  ```
  M | F | Other
  ```
</ParamField>

<ParamField body="address" type="object">
  Customer's address information
  
  <Expandable title="Address Object">
    <ParamField body="street" type="string">
      Street address
    </ParamField>
    
    <ParamField body="number" type="string">
      Address number
    </ParamField>
    
    <ParamField body="complement" type="string">
      Address complement (apartment, suite, etc.)
    </ParamField>
    
    <ParamField body="neighborhood" type="string">
      Neighborhood or district
    </ParamField>
    
    <ParamField body="city" type="string">
      City name
    </ParamField>
    
    <ParamField body="state" type="string">
      State abbreviation (SP, RJ, etc.)
    </ParamField>
    
    <ParamField body="postal_code" type="string">
      Postal code (CEP)
    </ParamField>
    
    <ParamField body="country" type="string">
      Country code (default: BR)
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="preferences" type="object">
  Customer communication and marketing preferences
  
  <Expandable title="Preferences Object">
    <ParamField body="whatsapp_notifications" type="boolean">
      Allow WhatsApp notifications (default: true)
    </ParamField>
    
    <ParamField body="email_notifications" type="boolean">
      Allow email notifications (default: true)
    </ParamField>
    
    <ParamField body="sms_notifications" type="boolean">
      Allow SMS notifications (default: false)
    </ParamField>
    
    <ParamField body="marketing_consent" type="boolean">
      Consent for marketing communications (default: false)
    </ParamField>
  </Expandable>
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the customer was created successfully
</ResponseField>

<ResponseField name="data" type="object">
  Created customer information
  
  <Expandable title="Customer Object">
    <ResponseField name="member_code" type="string">
      Unique Zupy customer identifier (format: ZP-XXXXXXXX)
    </ResponseField>
    
    <ResponseField name="name" type="string">
      Customer's full name
    </ResponseField>
    
    <ResponseField name="email" type="string">
      Customer's email address
    </ResponseField>
    
    <ResponseField name="whatsapp" type="string">
      Customer's WhatsApp number
    </ResponseField>
    
    <ResponseField name="cpf" type="string">
      Customer's CPF number (masked for privacy)
    </ResponseField>
    
    <ResponseField name="birth_date" type="string">
      Customer's birth date
    </ResponseField>
    
    <ResponseField name="points_balance" type="number">
      Initial points balance (always 0 for new customers)
    </ResponseField>
    
    <ResponseField name="customer_segment" type="string">
      Initial customer segment (always "New Customers")
    </ResponseField>
    
    <ResponseField name="status" type="string">
      Customer account status (active, inactive, suspended)
    </ResponseField>
    
    <ResponseField name="created_at" type="string">
      Customer creation timestamp (ISO 8601)
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="message" type="string">
  Human-readable response message
</ResponseField>

<ResponseField name="timestamp" type="string">
  Response timestamp in ISO 8601 format
</ResponseField>

## Example Request

<CodeGroup>
```bash cURL
curl -X POST "https://api.zupy.com/v1/loyalty/customers" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "whatsapp": "+5511965958122",
    "name": "João Silva",
    "email": "joao@email.com",
    "cpf": "12345678901",
    "birth_date": "1990-05-15",
    "gender": "M",
    "address": {
      "street": "Rua das Flores",
      "number": "123",
      "neighborhood": "Centro",
      "city": "São Paulo",
      "state": "SP",
      "postal_code": "01310-100",
      "country": "BR"
    },
    "preferences": {
      "whatsapp_notifications": true,
      "email_notifications": true,
      "marketing_consent": true
    }
  }'
```

```javascript JavaScript
const response = await fetch('https://api.zupy.com/v1/loyalty/customers', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    whatsapp: '+5511965958122',
    name: 'João Silva',
    email: 'joao@email.com',
    cpf: '12345678901',
    birth_date: '1990-05-15',
    gender: 'M',
    address: {
      street: 'Rua das Flores',
      number: '123',
      neighborhood: 'Centro',
      city: 'São Paulo',
      state: 'SP',
      postal_code: '01310-100',
      country: 'BR'
    },
    preferences: {
      whatsapp_notifications: true,
      email_notifications: true,
      marketing_consent: true
    }
  })
});

const data = await response.json();
console.log(data);
```

```python Python
import requests

url = "https://api.zupy.com/v1/loyalty/customers"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "whatsapp": "+5511965958122",
    "name": "João Silva",
    "email": "joao@email.com",
    "cpf": "12345678901",
    "birth_date": "1990-05-15",
    "gender": "M",
    "address": {
        "street": "Rua das Flores",
        "number": "123",
        "neighborhood": "Centro",
        "city": "São Paulo",
        "state": "SP",
        "postal_code": "01310-100",
        "country": "BR"
    },
    "preferences": {
        "whatsapp_notifications": True,
        "email_notifications": True,
        "marketing_consent": True
    }
}

response = requests.post(url, json=payload, headers=headers)
data = response.json()
print(data)
```

```php PHP
<?php
$url = "https://api.zupy.com/v1/loyalty/customers";

$headers = [
    "Authorization: Bearer YOUR_API_KEY",
    "Content-Type: application/json"
];

$payload = [
    "whatsapp" => "+5511965958122",
    "name" => "João Silva",
    "email" => "joao@email.com",
    "cpf" => "12345678901",
    "birth_date" => "1990-05-15",
    "gender" => "M",
    "address" => [
        "street" => "Rua das Flores",
        "number" => "123",
        "neighborhood" => "Centro",
        "city" => "São Paulo",
        "state" => "SP",
        "postal_code" => "01310-100",
        "country" => "BR"
    ],
    "preferences" => [
        "whatsapp_notifications" => true,
        "email_notifications" => true,
        "marketing_consent" => true
    ]
];

$response = file_get_contents($url, false, stream_context_create([
    'http' => [
        'method' => 'POST',
        'header' => implode("\r\n", $headers),
        'content' => json_encode($payload)
    ]
]));

$data = json_decode($response, true);
print_r($data);
?>
```
</CodeGroup>

## Example Response

<CodeGroup>
```json 201 - Customer Created
{
  "success": true,
  "data": {
    "member_code": "ZP-87654321",
    "name": "João Silva",
    "email": "joao@email.com",
    "whatsapp": "+5511965958122",
    "cpf": "123.***.**1-01",
    "birth_date": "1990-05-15",
    "gender": "M",
    "points_balance": 0,
    "customer_segment": "New Customers",
    "status": "active",
    "created_at": "2024-01-15T10:30:00Z"
  },
  "message": "Customer created successfully",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

```json 409 - Customer Already Exists
{
  "success": false,
  "error": {
    "code": "CUSTOMER_ALREADY_EXISTS",
    "message": "Customer already exists with this WhatsApp number",
    "details": {
      "existing_member_code": "ZP-12345678",
      "conflict_field": "whatsapp",
      "conflict_value": "+5511965958122"
    }
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

```json 400 - Validation Error
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid customer data provided",
    "details": {
      "whatsapp": ["WhatsApp number is required"],
      "name": ["Name must be at least 2 characters long"],
      "email": ["Invalid email format"],
      "cpf": ["Invalid CPF format"]
    }
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```
</CodeGroup>

## Validation Rules

### Required Fields
- **WhatsApp**: Must be in international format (+5511999999999)
- **Name**: Minimum 2 characters, maximum 100 characters

### Optional Field Validation
- **Email**: Must be valid email format
- **CPF**: Must be valid Brazilian CPF (with or without formatting)
- **Birth Date**: Must be YYYY-MM-DD format, customer must be 13+ years old
- **Gender**: Must be one of: M, F, Other
- **Postal Code**: Must be valid Brazilian CEP format

## Business Rules

<Note>
  **Duplicate Prevention**: Customers are uniquely identified by WhatsApp number. If a customer with the same WhatsApp already exists, the API will return a 409 Conflict error.
</Note>

<Warning>
  **LGPD Compliance**: All personal data is collected with explicit consent and can be deleted upon customer request. CPF numbers are automatically masked in API responses.
</Warning>

## Rate Limits

- **Production**: 500 requests per minute
- **Staging**: 100 requests per minute

## Error Codes

| Code | Description |
|------|-------------|
| `CUSTOMER_ALREADY_EXISTS` | Customer with this WhatsApp number already exists |
| `VALIDATION_ERROR` | Invalid data format in request body |
| `UNAUTHORIZED` | Missing or invalid API key |
| `RATE_LIMIT_EXCEEDED` | Too many requests |