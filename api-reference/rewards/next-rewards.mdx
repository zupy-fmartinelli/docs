---
title: "Get Next Rewards"
api: "GET /loyalty/customers/{member_id}/next-rewards"
description: "Get personalized next rewards for a customer based on their current points balance and earning patterns"
---

## Overview

This endpoint returns the most achievable rewards for a customer based on their current points balance. It prioritizes rewards the customer can either redeem immediately or reach with the fewest additional transactions, making it ideal for displaying motivation and progress indicators.

<Note>
  **Personalized Results**: Rewards are ordered by achievability - redeemable rewards first, followed by closest rewards based on the customer's average earning patterns.
</Note>

## Authentication

<ParamField header="Authorization" type="string" required>
  Bearer token for API authentication
  ```
  Authorization: Bearer {your_api_key}
  ```
</ParamField>

## Path Parameters

<ParamField path="member_id" type="string" required>
  Unique Zupy customer identifier
  ```
  ZP-4F95FB0A
  ```
</ParamField>

## Query Parameters

<ParamField query="limit" type="integer">
  Number of rewards to return
  ```
  Default: 3, Maximum: 10
  ```
</ParamField>

<ParamField query="category" type="string">
  Filter rewards by category
  ```
  food | drinks | discounts | experiences
  ```
</ParamField>

<ParamField query="include_unreachable" type="boolean">
  Include rewards that would require many transactions to reach
  ```
  Default: false
  ```
</ParamField>

## Response

<ResponseField name="member_id" type="string">
  Customer identifier
</ResponseField>

<ResponseField name="current_points" type="integer">
  Customer's current points balance
</ResponseField>

<ResponseField name="tier" type="string">
  Customer's current loyalty tier
</ResponseField>

<ResponseField name="customer_profile" type="object">
  Customer earning patterns for better recommendations
  
  <Expandable title="Customer Profile">
    <ResponseField name="average_order_points" type="integer">
      Average points earned per transaction
    </ResponseField>
    
    <ResponseField name="monthly_transactions" type="integer">
      Average transactions per month
    </ResponseField>
    
    <ResponseField name="preferred_categories" type="array">
      Categories customer redeems most often
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="next_rewards" type="array">
  List of recommended rewards ordered by achievability
  
  <Expandable title="Reward Object">
    <ResponseField name="reward_id" type="string">
      Unique reward identifier
    </ResponseField>
    
    <ResponseField name="name" type="string">
      Display name of the reward
    </ResponseField>
    
    <ResponseField name="description" type="string">
      Reward description
    </ResponseField>
    
    <ResponseField name="points_required" type="integer">
      Total points needed to redeem this reward
    </ResponseField>
    
    <ResponseField name="points_needed" type="integer">
      Additional points needed from current balance (0 if can redeem now)
    </ResponseField>
    
    <ResponseField name="progress_percentage" type="number">
      Progress towards this reward (0-100)
    </ResponseField>
    
    <ResponseField name="can_redeem_now" type="boolean">
      Whether customer has enough points to redeem immediately
    </ResponseField>
    
    <ResponseField name="estimated_orders" type="integer">
      Estimated number of typical orders needed to reach this reward
    </ResponseField>
    
    <ResponseField name="estimated_days" type="integer">
      Estimated days to reach reward based on customer's pattern
    </ResponseField>
    
    <ResponseField name="category" type="string">
      Reward category
    </ResponseField>
    
    <ResponseField name="image_url" type="string">
      Reward image URL
    </ResponseField>
    
    <ResponseField name="recommendation_reason" type="string">
      Why this reward was recommended
      ```
      can_redeem_now | almost_there | popular_choice | category_match | tier_appropriate
      ```
    </ResponseField>
    
    <ResponseField name="urgency" type="object">
      Time-sensitive information about the reward
      
      <Expandable title="Urgency Object">
        <ResponseField name="is_limited" type="boolean">
          Whether this reward has limited availability
        </ResponseField>
        
        <ResponseField name="stock_remaining" type="integer">
          Remaining stock (if limited)
        </ResponseField>
        
        <ResponseField name="expires_at" type="string">
          Expiration date for seasonal rewards (ISO 8601)
        </ResponseField>
        
        <ResponseField name="urgency_level" type="string">
          Urgency classification
          ```
          none | low | medium | high | critical
          ```
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

## Example Request

<CodeGroup>
```bash cURL
curl -X GET "https://api.zupy.com/v1/loyalty/customers/ZP-4F95FB0A/next-rewards?limit=5" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"
```

```javascript JavaScript
const response = await fetch('https://api.zupy.com/v1/loyalty/customers/ZP-4F95FB0A/next-rewards?limit=5', {
  method: 'GET',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  }
});

const nextRewards = await response.json();
console.log(nextRewards);
```

```python Python
import requests

url = "https://api.zupy.com/v1/loyalty/customers/ZP-4F95FB0A/next-rewards"
params = {"limit": 5}
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

response = requests.get(url, params=params, headers=headers)
next_rewards = response.json()
print(next_rewards)
```

```php PHP
<?php
$url = "https://api.zupy.com/v1/loyalty/customers/ZP-4F95FB0A/next-rewards?limit=5";

$headers = [
    "Authorization: Bearer YOUR_API_KEY",
    "Content-Type: application/json"
];

$response = file_get_contents($url, false, stream_context_create([
    'http' => [
        'method' => 'GET',
        'header' => implode("\r\n", $headers)
    ]
]));

$nextRewards = json_decode($response, true);
print_r($nextRewards);
?>
```
</CodeGroup>

## Example Response

<CodeGroup>
```json 200 - Active Customer with Mixed Progress
{
  "member_id": "ZP-4F95FB0A",
  "current_points": 847,
  "tier": "silver",
  "customer_profile": {
    "average_order_points": 38,
    "monthly_transactions": 6,
    "preferred_categories": ["food", "drinks"]
  },
  "next_rewards": [
    {
      "reward_id": "rw_drink_soda",
      "name": "Refrigerante 350ml Grátis",
      "description": "Refrigerante de qualquer sabor disponível, 350ml gelado",
      "points_required": 300,
      "points_needed": 0,
      "progress_percentage": 100,
      "can_redeem_now": true,
      "estimated_orders": 0,
      "estimated_days": 0,
      "category": "drinks",
      "image_url": "https://cdn.zupy.com/rewards/soda.jpg",
      "recommendation_reason": "can_redeem_now",
      "urgency": {
        "is_limited": false,
        "urgency_level": "none"
      }
    },
    {
      "reward_id": "rw_discount_10percent",
      "name": "10% de Desconto",
      "description": "10% de desconto em qualquer pedido acima de R$ 20",
      "points_required": 500,
      "points_needed": 0,
      "progress_percentage": 100,
      "can_redeem_now": true,
      "estimated_orders": 0,
      "estimated_days": 0,
      "category": "discounts",
      "recommendation_reason": "can_redeem_now",
      "urgency": {
        "is_limited": false,
        "urgency_level": "none"
      }
    },
    {
      "reward_id": "rw_pizza_margherita",
      "name": "Pizza Margherita Grátis",
      "description": "Pizza Margherita tradicional completa",
      "points_required": 1000,
      "points_needed": 153,
      "progress_percentage": 84.7,
      "can_redeem_now": false,
      "estimated_orders": 4,
      "estimated_days": 20,
      "category": "food",
      "image_url": "https://cdn.zupy.com/rewards/pizza_margherita.jpg",
      "recommendation_reason": "almost_there",
      "urgency": {
        "is_limited": false,
        "urgency_level": "none"
      }
    },
    {
      "reward_id": "rw_beer_craft",
      "name": "Cerveja Artesanal 355ml",
      "description": "Cerveja artesanal da casa, 355ml gelada",
      "points_required": 600,
      "points_needed": 0,
      "progress_percentage": 100,
      "can_redeem_now": true,
      "estimated_orders": 0,
      "estimated_days": 0,
      "category": "drinks",
      "recommendation_reason": "category_match",
      "urgency": {
        "is_limited": true,
        "stock_remaining": 5,
        "urgency_level": "medium"
      }
    },
    {
      "reward_id": "rw_dessert_tiramisu",
      "name": "Tiramisu Individual",
      "description": "Tiramisu tradicional italiano individual",
      "points_required": 800,
      "points_needed": 0,
      "progress_percentage": 100,
      "can_redeem_now": true,
      "estimated_orders": 0,
      "estimated_days": 0,
      "category": "food",
      "recommendation_reason": "tier_appropriate",
      "urgency": {
        "is_limited": false,
        "expires_at": "2025-12-31T23:59:59Z",
        "urgency_level": "low"
      }
    }
  ]
}
```

```json 200 - New Customer with Limited Points
{
  "member_id": "ZP-8B23CD41",
  "current_points": 150,
  "tier": "bronze",
  "customer_profile": {
    "average_order_points": 25,
    "monthly_transactions": 2,
    "preferred_categories": []
  },
  "next_rewards": [
    {
      "reward_id": "rw_drink_soda",
      "name": "Refrigerante 350ml Grátis",
      "description": "Refrigerante de qualquer sabor disponível, 350ml gelado",
      "points_required": 300,
      "points_needed": 150,
      "progress_percentage": 50.0,
      "can_redeem_now": false,
      "estimated_orders": 6,
      "estimated_days": 90,
      "category": "drinks",
      "recommendation_reason": "almost_there",
      "urgency": {
        "is_limited": false,
        "urgency_level": "none"
      }
    },
    {
      "reward_id": "rw_discount_5percent",
      "name": "5% de Desconto",
      "description": "5% de desconto em qualquer pedido",
      "points_required": 200,
      "points_needed": 50,
      "progress_percentage": 75.0,
      "can_redeem_now": false,
      "estimated_orders": 2,
      "estimated_days": 30,
      "category": "discounts",
      "recommendation_reason": "almost_there",
      "urgency": {
        "is_limited": false,
        "urgency_level": "none"
      }
    },
    {
      "reward_id": "rw_free_delivery",
      "name": "Entrega Grátis",
      "description": "Entrega gratuita no seu próximo pedido",
      "points_required": 250,
      "points_needed": 100,
      "progress_percentage": 60.0,
      "can_redeem_now": false,
      "estimated_orders": 4,
      "estimated_days": 60,
      "category": "discounts",
      "recommendation_reason": "popular_choice",
      "urgency": {
        "is_limited": false,
        "urgency_level": "none"
      }
    }
  ]
}
```

```json 404 - Customer Not Found
{
  "error": "customer_not_found",
  "message": "Customer with member_id 'ZP-INVALID1' not found"
}
```
</CodeGroup>

## Recommendation Logic

### Priority Order (Highest to Lowest)
1. **Can Redeem Now** (`can_redeem_now: true`)
2. **Almost There** (80%+ progress)
3. **Category Match** (customer's preferred categories)
4. **Tier Appropriate** (rewards suitable for customer's tier)
5. **Popular Choice** (most redeemed by similar customers)

### Recommendation Reasons

<ResponseField name="can_redeem_now">
  **Can Redeem Now**: Customer has enough points to redeem immediately
</ResponseField>

<ResponseField name="almost_there">
  **Almost There**: Customer is 80%+ of the way to earning this reward
</ResponseField>

<ResponseField name="popular_choice">
  **Popular Choice**: Most frequently redeemed by customers with similar profiles
</ResponseField>

<ResponseField name="category_match">
  **Category Match**: Matches customer's preferred redemption categories
</ResponseField>

<ResponseField name="tier_appropriate">
  **Tier Appropriate**: Reward well-suited for customer's current loyalty tier
</ResponseField>

## Estimation Algorithms

### Estimated Orders Calculation
```
estimated_orders = ceil(points_needed / customer.average_order_points)
```

### Estimated Days Calculation
```
estimated_days = estimated_orders × (30 / customer.monthly_transactions)
```

### Progress Percentage
```
progress_percentage = (current_points / points_required) × 100
// Capped at 100% for display purposes
```

## Urgency Levels

<ResponseField name="none">
  **None**: Standard reward with no time constraints
</ResponseField>

<ResponseField name="low">
  **Low**: Seasonal reward expiring in 30+ days
</ResponseField>

<ResponseField name="medium">
  **Medium**: Limited stock (5-20 remaining) or seasonal (7-30 days)
</ResponseField>

<ResponseField name="high">
  **High**: Limited stock (2-5 remaining) or seasonal (2-7 days)
</ResponseField>

<ResponseField name="critical">
  **Critical**: Very limited stock (1 remaining) or expiring within 24 hours
</ResponseField>

## Use Cases

### 1. Loyalty Dashboard
Display personalized rewards to motivate customers:
```javascript
const displayNextRewards = (rewards) => {
  const redeemableCount = rewards.filter(r => r.can_redeem_now).length;
  
  if (redeemableCount > 0) {
    showNotification(`Você tem ${redeemableCount} recompensa(s) disponível(eis)!`);
  }
  
  return rewards.map(reward => ({
    ...reward,
    displayText: getRewardDisplayText(reward)
  }));
};

const getRewardDisplayText = (reward) => {
  if (reward.can_redeem_now) {
    return "Resgatar agora!";
  }
  if (reward.estimated_orders <= 2) {
    return `Apenas ${reward.estimated_orders} pedido(s) para conquistar`;
  }
  return `${reward.progress_percentage.toFixed(0)}% conquistado`;
};
```

### 2. Progress Motivation
Show progress bars and motivational messages:
```javascript
const showProgressMotivation = (reward) => {
  const progress = reward.progress_percentage;
  const urgency = reward.urgency.urgency_level;
  
  let message = `Você está ${progress.toFixed(0)}% do caminho para ${reward.name}!`;
  
  if (urgency === 'high' || urgency === 'critical') {
    message += ` ⚠️ Oferta limitada - apenas ${reward.urgency.stock_remaining} restantes!`;
  }
  
  if (reward.estimated_orders <= 1) {
    message = `Quase lá! Apenas mais ${reward.points_needed} pontos para ${reward.name}`;
  }
  
  return message;
};
```

### 3. Targeted Campaigns
Create personalized promotions based on almost-reached rewards:
```javascript
const createTargetedCampaign = (customer, nextRewards) => {
  const almostThere = nextRewards.filter(r => 
    r.progress_percentage > 75 && !r.can_redeem_now
  );
  
  if (almostThere.length > 0) {
    const reward = almostThere[0];
    return {
      type: 'points_boost',
      message: `Ganhe ${reward.points_needed} pontos extras na próxima compra e conquiste ${reward.name}!`,
      bonus_points: reward.points_needed,
      expires_in_hours: 48
    };
  }
};
```

## Integration Examples

### Real-time Updates
```javascript
// Update rewards when customer earns points
const updateNextRewards = async (memberId) => {
  const rewards = await fetch(`/loyalty/customers/${memberId}/next-rewards`);
  const data = await rewards.json();
  
  // Check for newly available rewards
  const newlyAvailable = data.next_rewards.filter(r => 
    r.can_redeem_now && !previouslyAvailable.includes(r.reward_id)
  );
  
  if (newlyAvailable.length > 0) {
    showCelebration(`Nova recompensa disponível: ${newlyAvailable[0].name}!`);
  }
  
  updateRewardsUI(data);
};
```

### Category Filtering
```javascript
// Show rewards for specific interests
const getRewardsByCategory = async (memberId, category) => {
  const response = await fetch(
    `/loyalty/customers/${memberId}/next-rewards?category=${category}&limit=10`
  );
  return response.json();
};
```

## Performance Considerations

### Caching Strategy
- Cache customer profile data for 1 hour
- Cache reward catalog for 30 minutes
- Recalculate recommendations after each transaction

### Response Time
- Typical response: 50-100ms
- Includes real-time points calculation
- Uses customer behavior analysis

## Error Codes

| Code | Description |
|------|-------------|
| `customer_not_found` | Customer doesn't exist or is inactive |
| `invalid_limit` | Limit parameter exceeds maximum (10) |
| `invalid_category` | Category filter value not supported |
| `insufficient_data` | Not enough transaction history for recommendations |
| `unauthorized` | Missing or invalid API credentials |

## Rate Limits

- **Production**: 300 requests per minute per customer
- **Staging**: 100 requests per minute per customer

<Tip>
  **Engagement Strategy**: Use this endpoint to create personalized experiences. Customers with rewards they can redeem immediately have 40% higher engagement rates.
</Tip>

<Warning>
  **Stock Changes**: Limited availability rewards may become unavailable between API calls. Always validate availability before allowing redemption attempts.
</Warning>